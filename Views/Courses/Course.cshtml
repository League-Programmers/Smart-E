
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Microsoft.AspNetCore.Mvc.Localization
@model Smart_E.Data.ChapterViewModel
@inject IViewLocalizer _localizer


<!DOCTYPE html>
<html dir="ltr" lang="en">
 <body>
     <header>
         
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <meta charset="utf-8"/>
            <meta http-equiv="X-UA-Compatible" content="ie-edge" />
            <link rel="stylesheet" href=""/>
            <script>
                src="main.js" deferred>
            </script>
        <style>
           
            .h1 {
                text-align: center;
            }
            .accordion {
                width: 90%;
                max-width: 1000px;
                margin: 2rem auto;
            }
            .accordion-item {
               backround-color: lightblue;
               margin: 1rem 0;
               border-radius: 0.5rem;
               box-shadow: 0 2px 5px 0 rgba(0,0,0,0.25);
            }

            .accordion-item-header {
               padding: 0.5rem 3rem 0.5rem 1rem;
               min-hight: 3.5rem;
               line-height: 1.25rem;
               font-weight: bold;
               display: flex;
               align-items: center;
               position: relative;
               cusor: pointer;
            }
            .accordion-item-header::after {
                content: "\002B";
                font-size: 2rem;
                position: absolute;
                right: 1rem;
            }
            .accordion-item-header.active::after {
                content: "\2212";
                transform: rotate(-180deg);
            }
            .accordion-item-body {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.2s ease-out;
               
            }
            .accordion-item-body-content {
                padding: 1rem;
                line-height: 1.5rem;
                border-top: 3px solid #34495e;
            }aq
             .accordion-item-header.active + .accordion-item-body {
            max-height: 500px;
             }
             .button {
               float: right;
                margin-right: 50px;
             }
             

       </style>
            
     </header>

<div>   
 <div class="col-5 align-self-center">
  <h3 class="page-title">@_localizer["Welcome to"] </h3>
</div>

<br />
<br />
<button type="button" id="BtnCreateServiceNote"  class="btn btn-outline-danger waves-effect waves-light"><a asp-controller="Courses" asp-action="CreateChapter"  >New Chapter</a></button>
 
<section>
 @if (Model != null)
 {
     @foreach (var item in Model.chapters)
      {
         <div class="accordion">
               <div class="accordion-item">
                   <div class="accordion-item-header">
                  <label >@item.ChapterName - @item.Date</label>
                    </div>
                      <div class="accordion-item-body">
                            <div class="accordion-item-body-content">
                              
                                   
                                        <label>@item.Description</label>
                                     <div class="row">
     <table class="table">
         <thead>
             <tr>
                 <th>File Name</th>
                 <th>Topic Name</th>
                 <th></th>
                 <th></th>
             </tr>
         </thead>
         <tbody>

                 @foreach (var row in Model.documents)
                 {
             <tr>
                 <td> @row.FileName</td> 
                 <td><a class="btn btn-primary" asp-action="GetAttachment" asp-controller="Subject" asp-route-ID="@row.FileID">View</a></td>
                 <td><a class="btn btn-primary" asp-action="GetFileStreamResultDemo" asp-controller="Subject" asp-route-filename="@row.FileName">Download</a></td>
                 <td><a  class="btn btn-primary" asp-action="DeleteFile" asp-controller="Subject">Delete</a></td>
             </tr>
                 }
            
              
  
         </tbody>
     </table>
 </div>
                                

                            </div>
                            <div class="button">
                                <button type="button" id="BtnCreateServiceNote"  class="btn btn-outline-danger waves-effect waves-light"><a asp-controller="Courses" asp-action="EditChapter" asp-route-id="">Edit Chapter</a></button>
                                <button type="button" id="BtnCreateServiceNote"  class="btn btn-outline-danger waves-effect waves-light"><a asp-controller="Courses" asp-action="UploadAttachment" asp-route-id="">Add Document</a></button>
                            </div>
                      </div>

             </div>

         </div>
    }
 }
</section>

</div> 
 </body>

   <div>
    <script src="~/assets/libs/moment/moment.js"></script>
    <script src="~/assets/libs/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker-custom.js"></script>
    <script src="~/assets/extra-libs/DataTables/datatables.min.js"></script>
    <script src="~/dist/js/pages/datatable/datatable-basic.init.js"></script>
    <script src="~/assets/libs/select2/dist/js/select2.full.min.js"></script>
    <script src="~/assets/libs/select2/dist/js/select2.min.js"></script>
    <script src="~/dist/js/pages/forms/select2/select2.init.js"></script>
    <script src="~/assets/libs/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script src="~/assets/libs/sweetalert2/sweet-alert.init.js"></script>
    <script src="~/assets/libs/moment/moment.js"></script>
    <script src="~/assets/libs/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>


</div>


<script>
const accordionItemHeaders = document.querySelectorAll(".accordion-item-header");
accordionItemHeaders.forEach(accordionItemHeader => {
accordionItemHeader.addEventListener("click", event => {
    const currentlyActiveAccordionItemHeader = document.querySelector(".accordion-item-header.active");

    if (currentlyActiveAccordionItemHeader && currentlyActiveAccordionItemHeader !== accordionItemHeaders) {
        currentlyActiveAccordionItemHeader.classList.toggle("active");
        currentlyActiveAccordionItemHeader.nextElementSibling.style.maxHeight = 0;
    }

        accordionItemHeader.classList.toggle("active");
        const accordingItembody = accordionItemHeader.nextElementSibling;
        if (accordionItemHeader.classList.contains("active")) {
            accordingItembody.style.maxHeight = accordingItembody.scrollHeight + "px";
        }
        else {
            accordingItembody.style.maxHeight = 0;
        }
    });
});
    

</script>

